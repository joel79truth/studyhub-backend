<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudyHub LUANAR</title>
  <link rel="stylesheet" href="style.css">
  

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1E90FF" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="StudyHub LUANAR" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />



  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0LTZS1S9W6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-0LTZS1S9W6');
  </script>

  <style>
    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      height: 100vh;
      background: linear-gradient(180deg, #817cd8, #0f1011);
      color: white;
      padding: 20px 15px;
      box-shadow: 3px 0 12px rgba(59, 130, 246, 0.6);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      z-index: 999;
      transform: translateX(-260px);
      transition: transform 0.3s ease;
    }

    .sidebar.active { transform: translateX(0); }

    .close-btn {
      align-self: flex-end;
      background: transparent;
      border: none;
      font-size: 30px;
      color: white;
      cursor: pointer;
      margin-bottom: 15px;
      transition: color 0.3s ease;
    }

    .nav-list { list-style: none; padding: 0; margin: 0; flex-grow: 1; }
    .nav-list li + li { margin-top: 15px; }
    .nav-list a {
      color: white; text-decoration: none; font-size: 1.1rem;
      padding: 10px 12px; display: block; border-radius: 8px;
      transition: background-color 0.25s ease; user-select: none;
    }
    .nav-list a:hover, .nav-list a:focus { background-color: rgba(255 255 255 / 0.2); outline: none; }

    .dark-mode-btn {
      margin-top: 20px; background: rgba(255 255 255 / 0.15);
      border: none; padding: 12px 15px; font-size: 1.1rem; color: white;
      border-radius: 8px; cursor: pointer; transition: background-color 0.3s ease;
      user-select: none;
    }
    .dark-mode-btn:hover, .dark-mode-btn:focus { background: rgba(255 255 255 / 0.3); outline: none; }

    .luanar-logo { width: 75px; height: auto; display: block; margin: 20px auto; }
    .logo-container { text-align: center; }

    /* Glassmorphism buttons */
    .glass-btn-row {
      display: flex; justify-content: space-around; align-items: center;
      margin: 20px auto; padding: 3px; width: 90%; max-width: 600px;
      background: rgba(0, 0, 0, 0.938); backdrop-filter: blur(10px);
      border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    }
    .glass-button { display: flex; flex-direction: column; align-items: center; }
    .glass-button .icon-btn {
      width: 60px; height: 60px; border-radius: 15px; display: flex;
      justify-content: center; align-items: center;
      background: linear-gradient(135deg, #4f46e5, #3b82f6);
      box-shadow: 0 6px 12px rgba(59, 130, 246, 0.5);
      transition: all 0.3s ease; text-decoration: none;
    }
    .glass-button .icon-btn:hover {
      background: linear-gradient(135deg, #4338ca, #2563eb);
      box-shadow: 0 8px 16px rgba(37, 99, 235, 0.7);
      transform: scale(1.05);
    }
    .glass-button .btn-label { font-size: 13px; color: white; margin-top: 6px; font-weight: bolder; }

  
    .subject-btn:hover { transform: scale(1.05); }

    .bottom-buttons { display: flex; justify-content: center; gap: 30px; margin-top: 20px; }
    .button-with-label { display: flex; flex-direction: column; align-items: center; }
    .icon-btn { background: linear-gradient(135deg, #4f46e5, #3b82f6); color: white; border: none;
      width: 50px; height: 50px; border-radius: 12px; cursor: pointer; display: flex;
      align-items: center; justify-content: center; box-shadow: 0 6px 12px rgba(59, 130, 246, 0.5);
      transition: background 0.3s ease, box-shadow 0.3s ease; text-decoration: none; }
    .icon-btn:hover { background: linear-gradient(135deg, #4338ca, #2563eb); box-shadow: 0 8px 16px rgba(37, 99, 235, 0.7);}
    .icon-btn:active { transform: scale(0.97); box-shadow: 0 4px 8px rgba(37, 99, 235, 0.6); }


/* Button labels */
/* Smaller Glassmorphism buttons */
/* Glassmorphism buttons - smaller version */
.glass-btn-row {
  display: flex;
  justify-content: space-around;
  align-items: center;
  margin: 15px auto;
  padding: 5px;
  width: 90%;           /* smaller width (was 90%) */
  max-width: 400px;     /* was 600px */
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
  border-radius: 15px;  /* slightly smaller curve */
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

.glass-button {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* smaller buttons */
.glass-button .icon-btn {
  width: 45px;     /* was 60px */
  height: 45px;    /* was 60px */
  border-radius: 12px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #4f46e5, #3b82f6);
  box-shadow: 0 4px 10px rgba(59, 130, 246, 0.5);
  transition: all 0.3s ease;
  text-decoration: none;
  font-size: 18px; /* smaller icons/text */
}

.glass-button .icon-btn:hover {
  background: linear-gradient(135deg, #4338ca, #2563eb);
  box-shadow: 0 6px 14px rgba(37, 99, 235, 0.7);
  transform: scale(1.05);
}

/* smaller label */
.glass-button .btn-label {
  font-size: 11px;  /* was 13px */
  color: white;
  margin-top: 4px;  /* tighter spacing */
  font-weight: bold;
}


    /* Install & Notifications */
    #installBtn, #subscribeBtn {
      position: fixed; right: 20px; border: none; cursor: pointer; z-index: 10000;
    }
    #installBtn {
      bottom: 20px; background-color: #1E90FF; color: white; border-radius: 10px; padding: 14px 24px; font-size: 16px; font-weight: bold; box-shadow: 0 6px 12px rgba(30, 144, 255, 0.5);
      display: none;
    }
    #installBtn:hover { background-color: #0f6cd3; box-shadow: 0 8px 16px rgba(15, 108, 211, 0.7); }
    #installBtn:active { transform: scale(0.97); box-shadow: 0 4px 8px rgba(15, 108, 211, 0.6); }

    #subscribeBtn {
      bottom: 70px; background: linear-gradient(135deg, #4A90E2, #357ABD);
      color: white; padding: 10px 18px; border-radius: 25px; font-size: 14px; font-weight: 600; box-shadow: 0 3px 6px rgba(0,0,0,0.15);
      transition: all 0.3s ease-in-out;
    }
    #subscribeBtn:hover { background: linear-gradient(135deg, #5AA0F2, #4689D6); transform: scale(1.05);}
    #subscribeBtn:active { transform: scale(0.95);}

  #notifyBell {
    position: fixed;
    bottom: 20px;
    right: 20px;
    font-size: 30px;
    cursor: pointer;
    background: none;
    border: none;
    color: #ffcc00; /* gold color for bell */
    z-index: 9999;
  }

.carousel-container {
  position: relative;
  width: 90%;
  max-width: 600px;
  height: 200px;
  margin: 20px auto;
  overflow: hidden;
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.15);
}

.carousel-slide {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  right: -100%; /* start off-screen to the right */
  opacity: 0;
  transition: all 0.8s ease;
}

.carousel-slide.active {
  right: 0;
  opacity: 1;
}

.carousel-slide.prev {
  right: -100%;
  opacity: 0;
}

h3 {
  text-align: center;
  position: relative;
  display: inline-block;
  font-weight: bold;
  text-align: center;
  margin: 10px auto;
  padding: 8px 20px;
  color:black;
  /* Keep natural font size */
  font-size: inherit; 
  /* Glow effect */
  ;
  border-radius: 10px;
  overflow: hidden;
  z-index: 0;
}

/* Rotating glowing light */
h3::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -80%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg, #00ffff, #0044ff, #00ffff);
  animation: spin 5s linear infinite;
  z-index: -2;
}

h3::after {
  content: '';
  position: absolute;
  inset: 3px;
  background:aliceblue; /* match your page background */
  border-radius: 8px;
  z-index: -1;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.button-with-label .btn-label {
  margin-top: 6px;
  padding: 3px 8px;
  background: rgba(0, 0, 0, 0.6); /* dark semi-transparent background */
  color: #fff;
  font-size: 12px;
  font-weight: 600;
  border-radius: 6px;
  text-align: center;
  backdrop-filter: blur(5px); /* gives a glass look */
}

#youButton {
  position: fixed;        /* Fixes it relative to viewport */
  top: 10px;              /* Space from top */
  right: 10px;            /* Space from right */
  display: flex;
  flex-direction: column; /* Image on top, label below */
  align-items: center;
  z-index: 1000;          /* Stay above other elements */
}

/* Profile picture styling */
#youButton .profile-picture {
  width: 50px;            
  height: 50px;
  border-radius: 50%;     
  object-fit: cover;
}

/* Label styling */
#youButton .btn-label {
  margin-top: 5px;
  font-size: 14px;
  font-weight: bold;
  text-align: center;
  color: #333;
}

/* Adjust size for smaller screens */
@media (max-width: 600px) {
  #youButton .profile-picture {
    width: 40px;
    height: 40px;
  }

  #youButton .btn-label {
    font-size: 12px;
  }
}

@media (max-width: 400px) {
  #youButton {
    top: 5px;
    right: 5px;
  }
  
  #youButton .profile-picture {
    width: 35px;
    height: 35px;
  }

  #youButton .btn-label {
    font-size: 10px;
  }
}

</style>

<button id="notifyBell">üîî</button>

<!-- OneSignal SDK -->
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
<script>
window.onload = () => {
  const notifyBell = document.getElementById('notifyBell');

  // Initialize OneSignal
  OneSignal.push(function() {
    OneSignal.init({
      appId: "dc041d91-35cf-4daf-9955-a390afb8c506",
      notifyButton: { enable: false } // disable default OneSignal bell
    });
  });

  // Handle bell click
  notifyBell.addEventListener('click', async () => {
    const permission = await Notification.requestPermission();

    if (permission === "granted") {
      OneSignal.push(() => {
        OneSignal.registerForPushNotifications()
          .then(() => console.log("‚úÖ Notifications enabled!"))
          .catch(err => console.error("‚ùå OneSignal subscription failed:", err));
      });

      // Hide the bell after subscribing
      notifyBell.style.display = 'none';
      new Notification("Notifications enabled!");
    } else {
      alert("Permission denied. You can enable notifications later in your browser settings.");
    }
  });
};
</script>


</head>

<body>
  <header>
  <h1>StudyHub 
    <br>LUANAR</h1>
  </header>

 

  <!-- Sidebar -->
  <button id="menuIcon" class="menu-btn">
    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
  </button>

  <nav class="sidebar" id="sidebar">
    <button id="closeSidebarBtn" class="close-btn">&times;</button>
    <ul class="nav-list">
      <li><a href="index.html">üè† Home</a></li>
      <li><a href="profile.html"> your profile</a></li>
      <li><a href="upload.html">üì§ Upload Notes</a></li>
      <li><a href="request.html">üì© Request Notes</a></li>
      <li><a href="developer.html">üë§ About the Developer</a></li>
      <li><a href="admin.html">üõ†Ô∏è Admin Panel</a></li>
      <li><a href="support.html">‚òï Buy me coffee</a></li>
    </ul>
    <button id="toggleDarkMode" class="dark-mode-btn" aria-pressed="false">üåô Toggle Dark Mode</button>
  </nav>
<div class="profile-container" id="youButton">
  <a href="profile.html">
    <img id="youProfilePic" 
         src="https://cdn-icons-png.flaticon.com/512/847/847969.png" 
         alt="Profile Picture" 
         class="profile-picture">
  </a>
  <div class="btn-label">You</div>
</div>

<script>
// üîπ Load saved profile picture from localStorage (set in profile.html)
window.addEventListener("load", () => {
  const savedPic = localStorage.getItem("userProfilePic");
  if (savedPic) document.getElementById("youProfilePic").src = savedPic;
});
</script>

  <!-- Glass Buttons -->
  <main class="container">

     <div class="logo-container">
    <img src="images/luanar-logo.png" alt="LUANAR-Logo" class="luanar-logo">
 </div>

<h3>Welcome to StudyHub LUANAR
  <br>
HOME FOR NOTES. 3.7 GPA target</h3>

<div class="glass-btn-row">
  <!-- Message -->
  <div class="glass-button">
    <a href="message.html" class="icon-btn">
      <svg width="40" height="40" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
        <g fill="#4CAF50" stroke="#2E7D32" stroke-width="2">
          <rect x="8" y="12" width="48" height="36" rx="6" ry="6"/>
          <polygon points="8,48 32,36 56,48" fill="#81C784"/>
        </g>
      </svg>
    </a>
    <div class="btn-label">class</div>
  </div>

  <!-- Program -->
  <div class="glass-button">
    <a href="program.html" class="icon-btn">
      <svg width="40" height="40" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
        <g fill="#2196F3" stroke="#1565C0" stroke-width="2">
          <rect x="8" y="12" width="48" height="40" rx="4" ry="4"/>
          <line x1="16" y1="20" x2="48" y2="20" stroke="#BBDEFB" stroke-width="2"/>
          <line x1="16" y1="28" x2="48" y2="28" stroke="#BBDEFB" stroke-width="2"/>
          <line x1="16" y1="36" x2="48" y2="36" stroke="#BBDEFB" stroke-width="2"/>
        </g>
      </svg>
    </a>
    <div class="btn-label">Programs</div>
  </div>

  <!-- AI -->
  <div class="glass-button">
    <a href="past-paper.html" class="icon-btn">
      <svg width="40" height="40" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
        <g fill="#FF9800" stroke="#EF6C00" stroke-width="2">
          <circle cx="32" cy="32" r="20"/>
          <circle cx="32" cy="32" r="8" fill="#FFF3E0"/>
          <line x1="32" y1="12" x2="32" y2="20" stroke="#EF6C00" stroke-width="2"/>
          <line x1="32" y1="44" x2="32" y2="52" stroke="#EF6C00" stroke-width="2"/>
          <line x1="12" y1="32" x2="20" y2="32" stroke="#EF6C00" stroke-width="2"/>
          <line x1="44" y1="32" x2="52" y2="32" stroke="#EF6C00" stroke-width="2"/>
        </g>
      </svg>
    </a>
    <div class="btn-label">past papers</div>
  </div>
</div>


<!-- LUANAR Image Carousel -->
<div class="carousel-container">
  <img src="images/luanar1.jpg" class="carousel-slide" alt="LUANAR Image 1">
  <img src="images/luanar2.jpg" class="carousel-slide" alt="LUANAR Image 2">
  <img src="images/luanar3.jpg" class="carousel-slide" alt="LUANAR Image 3">
  <img src="images/luanar4.jpg" class="carousel-slide" alt="LUANAR Image 4">
  <img src="images/luanar5.jpg" class="carousel-slide" alt="LUANAR Image 5">
  <img src="images/luanar6.jpg" class="carousel-slide" alt="LUANAR Image 6">
  <img src="images/luanar7.jpg" class="carousel-slide" alt="LUANAR Image 7">
</div>



</main>
  <!-- Bottom Buttons -->
  <div class="bottom-buttons">
    <div class="button-with-label">
      <a href="feedback.html" class="icon-btn">üìù</a>
      
      <div class="btn-label">Feedback</div>
    </div>
    <div class="button-with-label">
      <a href="videolesson.html" class="icon-btn">‚ñ∂Ô∏è</a>
      
      <div class="btn-label">Video</div>
    </div>
    <div class="button-with-label">
      <a href="request.html" class="icon-btn">üì©</a>
      
      <div class="btn-label">Request</div>
    </div>
    <div class="button-with-label">
      <a href="wisdom.html" class="icon-btn">üí°</a>
      
      <div class="btn-label">Wisdom</div>
    </div>
  </div>

  <!-- PWA Install & Notifications -->
  <button id="installBtn">Install App</button>
 

  <script src="script.js"></script>


  <!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-messaging.js"></script>

<script>
  // Your web app's Firebase configuration
  const firebaseConfig = {
  apiKey: "AIzaSyAtK_FW9fIOihmnECEngkElA2QCsoRYUA0",
  authDomain: "studyhub-backend.firebaseapp.com",
  projectId: "studyhub-backend",
  storageBucket: "studyhub-backend.firebasestorage.app",
  messagingSenderId: "985257842533",
  appId: "1:985257842533:web:7cc7c9c0f74cc100ad338c"
  };

  // Initialize Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const messaging = firebase.messaging();
</script>

  <script>
async function enableNotifications() {
  const permission = await Notification.requestPermission();

  if (permission !== "granted") {
    console.log("‚ùå Notifications denied");
    return;
  }

  const token = await messaging.getToken({
    vapidKey: "PASTE_YOUR_VAPID_KEY_HERE"
  });

  console.log("üì® FCM TOKEN:", token);

  // Send token to backend
  await fetch("/save-token", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ token })
  });
}
</script>


  <script>
  // Sidebar toggle
  const sidebar = document.getElementById('sidebar');
  const menuIcon = document.getElementById('menuIcon');
  const closeSidebarBtn = document.getElementById('closeSidebarBtn');
  menuIcon.addEventListener('click', () => sidebar.classList.add('active'));
  closeSidebarBtn.addEventListener('click', () => sidebar.classList.remove('active'));

 
  // PWA install
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', e => {
    e.preventDefault();
    deferredPrompt = e;
    document.getElementById('installBtn').style.display = 'inline-block';
  });
  document.getElementById('installBtn').addEventListener('click', () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then(() => {
      deferredPrompt = null;
      document.getElementById('installBtn').style.display = 'none';
    });
  });

  // Load service worker
  
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker
      .register("/firebase-messaging-sw.js")
      .then(reg => console.log("‚úÖ Firebase SW registered"))
      .catch(err => console.error("‚ùå Firebase SW failed", err));
  });
}



  // Create HTML for each file
  function createFileCard(file) {
    return `<div style="margin:5px; padding:10px; border:1px solid #ccc; border-radius:8px;">
      <a href="${file.url}" target="_blank">${file.name}</a> - <b>${file.subject}</b>
    </div>`;
  }

  // Load metadata.json
 

  // Search notes
  async function handleSearch() {
    const query = document.getElementById('searchInput').value.toLowerCase().trim();
    const fileList = document.getElementById('fileList');
    if (!query) { fileList.innerHTML = '<p>Please enter a search keyword.</p>'; return; }

    const filtered = metadata.filter(file =>
      (file.name || '').toLowerCase().includes(query) ||
      (file.subject || '').toLowerCase().includes(query) ||
      (file.program || '').toLowerCase().includes(query)
    );
    fileList.innerHTML = filtered.length === 0 ? '<p>No matching notes found.</p>' : filtered.map(createFileCard).join('');
  }

  // Show files by subject
  async function handleSubjectClick(subject) {
    const fileList = document.getElementById('fileList');
    const filtered = metadata.filter(file => (file.subject || '').toLowerCase() === subject.toLowerCase());
    fileList.innerHTML = filtered.length === 0 ? '<p>No files found for this subject.</p>' : filtered.map(createFileCard).join('');
  }

  // Filter subjects by semester
  async function filterSemester(semesterNumber) {
    const subjectsContainer = document.getElementById('subjectsContainer');
    const closeSubjectBtn = document.getElementById('closeSubjectBtn');
    subjectsContainer.innerHTML = '';
    closeSubjectBtn.style.display = 'inline-block';

    const semesterFiles = metadata.filter(f => f.semester == semesterNumber);
    const subjects = [...new Set(semesterFiles.map(f => f.subject))];

    if (subjects.length === 0) {
      subjectsContainer.innerHTML = '<p>No subjects found for this semester.</p>';
      return;
    }

    subjects.forEach(subject => {
      const btn = document.createElement('button');
      btn.textContent = subject;
      btn.className = 'subject-btn';
      btn.onclick = () => handleSubjectClick(subject);
      subjectsContainer.appendChild(btn);
    });
  }

  // Close subjects
  document.getElementById('closeSubjectBtn').addEventListener('click', () => {
    document.getElementById('subjectsContainer').innerHTML = '';
    document.getElementById('closeSubjectBtn').style.display = 'none';
    document.getElementById('fileList').innerHTML = '';
  });
</script>

<script>
  // LUANAR Image Carousel
const slides = document.querySelectorAll('.carousel-slide');
let currentSlide = 0;

function showSlide(index) {
  slides.forEach((slide, i) => {
    slide.classList.remove('active', 'prev');
    if (i === index) slide.classList.add('active');
    if (i === currentSlide) slide.classList.add('prev');
  });
  currentSlide = index;
}

// Auto-slide every 2 seconds
function nextSlide() {
  const next = (currentSlide + 1) % slides.length;
  showSlide(next);
}

// Initialize
showSlide(0);
setInterval(nextSlide, 4000);

</script>

<script>
window.addEventListener("load", () => {
  enableNotifications();
});
</script>


</body>

</html>
