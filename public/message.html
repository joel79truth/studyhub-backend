 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudyHub AI Assistant - LUANAR</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }

    .chat-container {
      width: 100%;
      max-width: 900px;
      height: 95vh;
      max-height: 800px;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Header */
    .chat-header {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: white;
      padding: 20px 24px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .header-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .bot-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .header-info h1 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .status {
      font-size: 12px;
      color: #94a3b8;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .header-actions {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      width: 36px;
      height: 36px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .action-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Quick Actions */
    .quick-actions {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 5px;
    }

    .quick-actions::-webkit-scrollbar {
      height: 4px;
    }

    .quick-actions::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
    }

    .quick-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 12px;
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quick-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.3);
    }

    /* Messages Area */
    .messages-container {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
      background: #f8fafc;
    }

    .messages-container::-webkit-scrollbar {
      width: 6px;
    }

    .messages-container::-webkit-scrollbar-track {
      background: transparent;
    }

    .messages-container::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 3px;
    }

    .message {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.user {
      flex-direction: row-reverse;
    }

    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .bot-msg-avatar {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
    }

    .user-msg-avatar {
      background: linear-gradient(135deg, #8b5cf6, #7c3aed);
      color: white;
    }

    .message-content {
      max-width: 70%;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .message-bubble {
      padding: 12px 16px;
      border-radius: 12px;
      line-height: 1.5;
      font-size: 14px;
    }

    .message.bot .message-bubble {
      background: white;
      color: #1e293b;
      border: 1px solid #e2e8f0;
      border-bottom-left-radius: 4px;
    }

    .message.user .message-bubble {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .message-time {
      font-size: 11px;
      color: #94a3b8;
      padding: 0 4px;
    }

    .message.user .message-time {
      text-align: right;
    }

    /* Typing Indicator */
    .typing-indicator {
      display: none;
      padding: 12px 16px;
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      border-bottom-left-radius: 4px;
      width: fit-content;
    }

    .typing-indicator.show {
      display: flex;
      gap: 4px;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background: #64748b;
      border-radius: 50%;
      animation: typing 1.4s infinite;
    }

    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {
      0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.7;
      }
      30% {
        transform: translateY(-10px);
        opacity: 1;
      }
    }

    /* Suggestions */
    .suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }

    .suggestion-chip {
      background: #eff6ff;
      border: 1px solid #dbeafe;
      color: #1e40af;
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .suggestion-chip:hover {
      background: #dbeafe;
      border-color: #93c5fd;
    }

    /* Input Area */
    .input-container {
      padding: 20px 24px;
      background: white;
      border-top: 1px solid #e2e8f0;
    }

    .input-wrapper {
      display: flex;
      gap: 12px;
      align-items: flex-end;
    }

    .input-box {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    #messageInput {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      font-size: 14px;
      resize: none;
      max-height: 120px;
      transition: all 0.3s ease;
    }

    #messageInput:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .input-tools {
      display: flex;
      gap: 8px;
    }

    .tool-btn {
      background: none;
      border: none;
      color: #64748b;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: all 0.3s ease;
    }

    .tool-btn:hover {
      background: #f1f5f9;
      color: #1e293b;
    }

    #sendBtn {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      border: none;
      width: 48px;
      height: 48px;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    #sendBtn:hover {
      background: linear-gradient(135deg, #2563eb, #1d4ed8);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
    }

    #sendBtn:active {
      transform: translateY(0);
    }

    #sendBtn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    /* Welcome Screen */
    .welcome-screen {
      text-align: center;
      padding: 40px 20px;
    }

    .welcome-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }

    .welcome-title {
      font-size: 24px;
      font-weight: 700;
      color: #0f172a;
      margin-bottom: 8px;
    }

    .welcome-subtitle {
      font-size: 14px;
      color: #64748b;
      margin-bottom: 32px;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 24px;
    }

    .feature-card {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .feature-card:hover {
      border-color: #3b82f6;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
      transform: translateY(-2px);
    }

    .feature-icon {
      font-size: 32px;
      margin-bottom: 12px;
    }

    .feature-title {
      font-size: 14px;
      font-weight: 600;
      color: #0f172a;
      margin-bottom: 4px;
    }

    .feature-desc {
      font-size: 12px;
      color: #64748b;
    }

    /* Code Block */
    .code-block {
      background: #1e293b;
      color: #e2e8f0;
      padding: 12px 16px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      margin: 8px 0;
      overflow-x: auto;
    }

    /* Formula Block */
    .formula-block {
      background: #eff6ff;
      border-left: 4px solid #3b82f6;
      padding: 12px 16px;
      border-radius: 8px;
      margin: 8px 0;
      font-family: 'Times New Roman', serif;
      font-size: 14px;
    }

    /* List Styling */
    .message-bubble ul, .message-bubble ol {
      margin-left: 20px;
      margin-top: 8px;
    }

    .message-bubble li {
      margin-bottom: 4px;
    }

    /* Mobile Responsiveness */
    @media (max-width: 768px) {
      .chat-container {
        height: 100vh;
        max-height: none;
        border-radius: 0;
      }

      .chat-header {
        padding: 16px 20px;
      }

      .header-info h1 {
        font-size: 16px;
      }

      .messages-container {
        padding: 16px;
      }

      .message-content {
        max-width: 85%;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }

      .input-container {
        padding: 16px;
      }
    }

    @media (max-width: 480px) {
      .bot-avatar {
        width: 36px;
        height: 36px;
        font-size: 18px;
      }

      .message-avatar {
        width: 32px;
        height: 32px;
        font-size: 16px;
      }

      .message-bubble {
        font-size: 13px;
        padding: 10px 14px;
      }

      .welcome-title {
        font-size: 20px;
      }

      .welcome-icon {
        font-size: 48px;
      }
    }
  </style>
</head>
<body>

<div class="chat-container">
  <!-- Header -->
  <div class="chat-header">
    <div class="header-top">
      <div class="header-title">
        <div class="bot-avatar">ü§ñ</div>
        <div class="header-info">
          <h1>StudyHub AI Assistant</h1>
          <div class="status">
            <span class="status-dot"></span>
            <span>Always ready to help</span>
          </div>
        </div>
      </div>
      <div class="header-actions">
        <button class="action-btn" onclick="clearChat()" title="Clear Chat">üóëÔ∏è</button>
        <button class="action-btn" onclick="window.history.back()" title="Back">‚úñÔ∏è</button>
      </div>
    </div>
    <div class="quick-actions">
      <button class="quick-btn" onclick="sendQuickMessage('Help me solve a math problem')">üìê Math Help</button>
      <button class="quick-btn" onclick="sendQuickMessage('Explain a concept')">üí° Explain</button>
      <button class="quick-btn" onclick="sendQuickMessage('Study tips')">üìö Study Tips</button>
      <button class="quick-btn" onclick="sendQuickMessage('Generate citation')">üìù Citation</button>
      <button class="quick-btn" onclick="sendQuickMessage('Research help')">üî¨ Research</button>
    </div>
  </div>

  <!-- Messages -->
  <div class="messages-container" id="messagesContainer">
    <div class="welcome-screen" id="welcomeScreen">
      <div class="welcome-icon">üéì</div>
      <h2 class="welcome-title">Welcome to StudyHub AI Assistant</h2>
      <p class="welcome-subtitle">Your 24/7 academic companion for learning, problem-solving, and research</p>
      
      <div class="features-grid">
        <div class="feature-card" onclick="sendQuickMessage('Help me with math')">
          <div class="feature-icon">üßÆ</div>
          <div class="feature-title">Math & Science</div>
          <div class="feature-desc">Solve equations, explain formulas</div>
        </div>
        <div class="feature-card" onclick="sendQuickMessage('Help me write an essay')">
          <div class="feature-icon">‚úçÔ∏è</div>
          <div class="feature-title">Writing Help</div>
          <div class="feature-desc">Essays, reports, citations</div>
        </div>
        <div class="feature-card" onclick="sendQuickMessage('Study techniques')">
          <div class="feature-icon">üìñ</div>
          <div class="feature-title">Study Strategies</div>
          <div class="feature-desc">Effective learning methods</div>
        </div>
        <div class="feature-card" onclick="sendQuickMessage('Explain photosynthesis')">
          <div class="feature-icon">üî¨</div>
          <div class="feature-title">Concept Explanations</div>
          <div class="feature-desc">Deep understanding of topics</div>
        </div>
      </div>
    </div>
    
    <div class="message bot" style="display:none;">
      <div class="message-avatar bot-msg-avatar">ü§ñ</div>
      <div class="message-content">
        <div class="typing-indicator" id="typingIndicator">
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Input Area -->
  <div class="input-container">
    <div class="input-wrapper">
      <div class="input-box">
        <textarea 
          id="messageInput" 
          placeholder="Ask me anything... (e.g., 'Solve x¬≤ + 5x + 6 = 0')"
          rows="1"
        ></textarea>
        <div class="input-tools">
          <button class="tool-btn" onclick="insertSymbol('‚àö')">‚àö</button>
          <button class="tool-btn" onclick="insertSymbol('¬≤')">x¬≤</button>
          <button class="tool-btn" onclick="insertSymbol('œÄ')">œÄ</button>
          <button class="tool-btn" onclick="insertSymbol('‚à´')">‚à´</button>
        </div>
      </div>
      <button id="sendBtn" onclick="sendMessage()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
        </svg>
      </button>
    </div>
  </div>
</div>

<script>
// ========================
// GPT API Call
// ========================
async function fetchGPTResponse(message) {
  try {
    const res = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message }),
    });
    const data = await res.json();
    return data.reply;
  } catch (err) {
    console.error("GPT fetch error:", err);
    return "Sorry, I can't connect to the AI right now.";
  }
}

// ========================
// Knowledge Base & Handlers
// ========================
const knowledgeBase = {
  greetings: {
    patterns: ['hello', 'hi', 'hey', 'good morning', 'good afternoon', 'good evening', 'greetings'],
    responses: [
      "Hello! I'm your StudyHub AI Assistant. How can I help you with your studies today?",
      "Hi there! Ready to tackle some academic challenges together?",
      "Greetings! What would you like to learn or solve today?"
    ]
  },
  math: {
    patterns: ['math', 'equation', 'solve', 'calculate', 'algebra', 'calculus', 'geometry', 'trigonometry'],
    handler: (msg) => solveMathProblem(msg)
  },
  study: {
    patterns: ['study', 'learn', 'memorize', 'remember', 'focus', 'exam', 'test', 'preparation'],
    responses: [
      `Here are proven study techniques:

üìö **Study Methods:**
- Pomodoro Technique
- Active Recall
- Spaced Repetition
- Feynman Technique

üí° **Focus Tips:**
- Dedicated study space
- Minimize distractions
- Take breaks
- Start with 2-min rule

Want tips for a specific subject or exam?`
    ]
  },
  agriculture: {
    patterns: ['agriculture', 'farming', 'crop', 'soil', 'plant', 'livestock', 'harvest'],
    responses: [
      `I can help with Agricultural Sciences:

üå± Crop Science: Plant biology, crop production, pest management
üêÑ Animal Science: Nutrition, breeding, health
üåæ Agribusiness: Management, economics, marketing

What topic do you want to explore?`
    ]
  },
  science: {
    patterns: ['biology', 'chemistry', 'physics', 'photosynthesis', 'cell', 'atom', 'molecule', 'reaction'],
    handler: (msg) => {
      if (msg.toLowerCase().includes('photosynthesis')) return explainPhotosynthesis();
      return `I can explain various scientific concepts: Biology, Chemistry, Physics. Ask me anything!`;
    }
  },
  writing: {
    patterns: ['write', 'essay', 'paper', 'report', 'citation', 'grammar', 'reference'],
    responses: [
      `I can assist with academic writing: Essays, Reports, Citations, APA/MLA formatting.`
    ]
  },
  research: {
    patterns: ['research', 'thesis', 'dissertation', 'methodology', 'literature review', 'data analysis'],
    responses: [
      `Research guidance: Define question, review literature, methodology, collect data, analyze results, conclusions.`
    ]
  },
  citation: {
    patterns: ['cite', 'citation', 'reference', 'bibliography'],
    handler: () => `I can generate citations. Provide author, title, year, source type.`
  }
};

// ========================
// Message History
// ========================
let messageHistory = [];

// ========================
// DOM Ready Initialization
// ========================
document.addEventListener('DOMContentLoaded', () => {
  const input = document.getElementById('messageInput');

  // Auto-resize textarea
  input.addEventListener('input', function () {
    this.style.height = 'auto';
    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
  });

  // Send on Enter (Shift+Enter for new line)
  input.addEventListener('keypress', function (e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });
});

// ========================
// Send Message
// ========================
async function sendMessage() {
  const input = document.getElementById('messageInput');
  const message = input.value.trim();
  if (!message) return;

  // Hide welcome screen
  const welcomeScreen = document.getElementById('welcomeScreen');
  if (welcomeScreen) welcomeScreen.style.display = 'none';

  // Add user message
  addMessage(message, 'user');

  // Clear input
  input.value = '';
  input.style.height = 'auto';

  // Show typing
  showTyping();

  try {
    const lowerMessage = message.toLowerCase();

    // Check Knowledge Base first
    let response;
    for (const [category, data] of Object.entries(knowledgeBase)) {
      if (data.patterns.some(p => lowerMessage.includes(p))) {
        response = data.handler ? data.handler(message) :
                   data.responses[Math.floor(Math.random() * data.responses.length)];
        break;
      }
    }

    // Fallback to GPT if no KB match
    if (!response) {
      response = await fetchGPTResponse(message);
    }

    hideTyping();
    addMessage(response, 'bot');
  } catch (err) {
    hideTyping();
    addMessage("Oops! Something went wrong. Try again.", 'bot');
    console.error(err);
  }
}

// ========================
// Add Message to Chat
// ========================
function addMessage(text, sender) {
  const container = document.getElementById('messagesContainer');
  const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

  const messageDiv = document.createElement('div');
  messageDiv.className = `message ${sender}`;
  const avatar = sender === 'bot' ? 'ü§ñ' : 'üë§';
  const avatarClass = sender === 'bot' ? 'bot-msg-avatar' : 'user-msg-avatar';

  messageDiv.innerHTML = `
    <div class="message-avatar ${avatarClass}">${avatar}</div>
    <div class="message-content">
      <div class="message-bubble">${formatMessage(text)}</div>
      <div class="message-time">${time}</div>
    </div>
  `;

  container.appendChild(messageDiv);
  container.scrollTop = container.scrollHeight;

  messageHistory.push({ text, sender, time });
}

// ========================
// Format Message
// ========================
function formatMessage(text) {
  text = text.replace(/```([\s\S]*?)```/g, '<div class="code-block">$1</div>');
  text = text.replace(/\[formula\]([\s\S]*?)\[\/formula\]/g, '<div class="formula-block">$1</div>');
  text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
  text = text.replace(/\n/g, '<br>');
  return text;
}

// ========================
// Typing Indicator
// ========================
function showTyping() {
  document.getElementById('typingIndicator').classList.add('show');
  const container = document.getElementById('messagesContainer');
  container.scrollTop = container.scrollHeight;
}

function hideTyping() {
  document.getElementById('typingIndicator').classList.remove('show');
}

// ========================
// Math Solver
// ========================
function solveMathProblem(message) {
  const match = message.match(/([+-]?\d*)\s*x¬≤\s*([+-]?\s*\d+)\s*x\s*([+-]?\s*\d+)\s*=\s*0/);
  if (match) {
    let a = match[1] === '' || match[1] === '+' ? 1 : match[1] === '-' ? -1 : parseInt(match[1]);
    let b = parseInt(match[2].replace(/\s/g, ''));
    let c = parseInt(match[3].replace(/\s/g, ''));
    const discriminant = b * b - 4 * a * c;

    if (discriminant > 0) {
      const x1 = (-b + Math.sqrt(discriminant)) / (2 * a);
      const x2 = (-b - Math.sqrt(discriminant)) / (2 * a);
      return `**Solution for ${a}x¬≤ ${b >= 0 ? '+' : ''}${b}x ${c >= 0 ? '+' : ''}${c} = 0:**\n
[formula]x = (-b ¬± ‚àö(b¬≤-4ac))/2a[/formula]\n
x‚ÇÅ = ${x1.toFixed(2)}, x‚ÇÇ = ${x2.toFixed(2)}`;
    } else if (discriminant === 0) {
      const x = -b / (2 * a);
      return `**Solution:** Repeated root: x = ${x.toFixed(2)}`;
    } else {
      return `**Solution:** Two complex roots (Œî = ${discriminant})`;
    }
  }
  return "I can solve quadratic equations! Format like: x¬≤ + 5x + 6 = 0";
}

// ========================
// Photosynthesis Explanation
// ========================
function explainPhotosynthesis() {
  return `**Photosynthesis:** Plants convert light into chemical energy.

[formula]6CO‚ÇÇ + 6H‚ÇÇO + Light ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ[/formula]

1Ô∏è‚É£ Light-dependent reactions produce ATP & NADPH  
2Ô∏è‚É£ Calvin Cycle fixes CO‚ÇÇ into glucose  

Factors: Light, CO‚ÇÇ, Temperature, Water  
Importance: Oxygen & Food production`;
}

// ========================
// Quick Messages / Symbols / Clear Chat
// ========================
function sendQuickMessage(msg) { document.getElementById('messageInput').value = msg; sendMessage(); }

function insertSymbol(symbol) {
  const input = document.getElementById('messageInput');
  const start = input.selectionStart;
  const end = input.selectionEnd;
  input.value = input.value.substring(0, start) + symbol + input.value.substring(end);
  input.focus();
  input.selectionStart = input.selectionEnd = start + symbol.length;
}

function clearChat() {
  if (!confirm('Clear chat history?')) return;
  const container = document.getElementById('messagesContainer');
  container.innerHTML = `
    <div class="welcome-screen" id="welcomeScreen">
      <div class="welcome-icon">üéì</div>
      <h2 class="welcome-title">Welcome to StudyHub AI Assistant</h2>
      <p class="welcome-subtitle">Your 24/7 academic companion</p>
    </div>
    <div class="message bot" style="display:none;">
      <div class="message-avatar bot-msg-avatar">ü§ñ</div>
      <div class="message-content">
        <div class="typing-indicator" id="typingIndicator">
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
          <div class="typing-dot"></div>
        </div>
      </div>
    </div>
  `;
  messageHistory = [];
}
</script>
</body>
</html>